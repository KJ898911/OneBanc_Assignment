(function(){function h(a){a.shiftKey&&window.sg.common.constants.KEY_CODE.TAB===a.keyCode&&a.target===document.querySelector(b.section+" .layer-popup")&&(a.preventDefault(),document.querySelector(b.section+" .layer-popup__close").focus())}function k(a){a.shiftKey||window.sg.common.constants.KEY_CODE.TAB!==a.keyCode||(a.preventDefault(),document.querySelector(b.section+" .layer-popup").focus())}function p(){var a=document.querySelector(b.section+" .layer-popup");a.setAttribute("tabindex",0);a.focus();
e.popupControl.open(g);e.hiddenScroll()}var c=window.sg.common.$q,d=window.sg.common.layerPopupMaxHeight,q=window.sg.common.menu,e=window.sg.common.utils,b={section:".instant-exchange-popup-hubble",scrollPopup:".instant-exchange-popup-hubble .layer-popup",checkbox:'.instant-exchange-popup-hubble__note .checkbox-radio input[type\x3d"checkbox"]',firstStepPop:"#instant-exchange-popup-hubble",secondStepPop:"#instant-exchange-popup-hubble-offer",selectBox:".instant-exchange-popup-hubble__selectbox .menu",
closeButton:".instant-exchange-popup-hubble .layer-popup__close"},f=null,l=function(){c(b.firstStepPop).show();c(b.secondStepPop).hide();d.setMax(c(b.firstStepPop).target[0])},m=function(){f=c(b.section);f.find(b.closeButton).off("click").on("click",g);var a=document.querySelector(b.section+" .layer-popup__close");a.removeEventListener("keydown",k);a.addEventListener("keydown",k);a=document.querySelector(b.section+" .layer-popup");a.removeEventListener("keydown",h);a.addEventListener("keydown",h)},
n=function(){c(window);f=c(b.section);f.target.length&&(c(b.scrollPopup).target.forEach(function(a){d.init(c(a).target[0])}),m())},g=function(){document.querySelector(b.section).removeAttribute("style");e.popupControl.close();e.visibleScroll();document.querySelector('.pd-buying-tool [data-target-popup\x3d"instantExchangePopupHubble"]').focus()};c.ready(n);window.sg.components.instantExchangePopupHubble={init:n,reInit:function(){c(b.scrollPopup).target.forEach(function(a){d.reInit(c(a).target[0])});
m()},moveNextPop:function(){c(b.firstStepPop).hide();c(b.secondStepPop).show();d.setMax(c(b.secondStepPop).target[0])},movePrevPop:l,reInitSelectBox:function(){c(b.selectBox).target.forEach(function(a){q.reInit(c(a).target[0])})},showPopup:function(){l();document.querySelector(b.section).style.display="block";document.querySelector(b.section).focus();c(b.scrollPopup).target.forEach(function(a){d.init(c(a).target[0])});p()},closePopup:g}})();